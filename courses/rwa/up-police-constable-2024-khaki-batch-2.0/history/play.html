
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title> AK Player </title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="/js/click-heart.js" defer></script>
  <script src="/login/protection.js"> </script>

  <link rel="shortcut icon" href="/favicon.ico" />
<body style="background-image: url('https://www.colorhexa.com/171717.png');)">

  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/channel.css">
  <link rel="stylesheet" href="/css/content/rainbow/top.css">
  <link rel="stylesheet" href="/css/content/wrapper.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@600&family=Poppins:wght@500;600&family=REM:wght@600&family=Rowdies&display=swap');
  </style>

  <div class="header">
    <div class="stwRainbowTop"></div> </noscript>
    <div class="stwBlurRainbowTop"></div>

    <header class="header navbar-wapmash"> <button class="header__button" id="btnNav" type="button">
        <h2> </h2> <i class="material-icons">menu</i>
      </button>
      <h2> </h2> <a href="/"><img src="/assets/img/logo.png" alt="ak-logo" width="140" height="37" /></a>
      <h2></h2>
    </header>
  </div>
  </div>
  <nav class="nav preload">
    <div class="nav__links"> <a href="/" class="nav__link nav__link--active"> <i class="material-icons">home</i> Home
      </a>
      <a class="nav__link" href="/logout.html"> <i class="material-icons">login</i> Account </a>
      <a class="nav__link" href="/Copyright.html"> <i class="material-icons">copyright</i> Copyright</a>
      <a class="nav__link" href="/Privacy_Policy.html"> <i class="material-icons">policy</i> Privacy Policy </a>
      <div class="nav__title"><i class="material-icons">search</i> Search</div>
      <form class="search" action="/" method="get"> <input type="text" name="to-search" class="search-box"
          maxlength="2048" value="" placeholder="Search" /><input type="submit" value="Search" />
      </form>
      <div style="color:#5b5b5b;font-size:13px;padding:0px 8px 8px 12px;">Search by Name, Category etc.</div>
    </div>
    <div class="nav__overlay"></div>
  </nav>
  <script src="/js/menu/list.js"></script>
  </script></noscript>
  </head>

<br>
<style>
  body {
         margin: 0px
       }
       .jwplayer {
            position: absolute !important
         }

         #settingsButton {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      color: white;
      border: none;
      cursor: pointer;
    }

    #popupMenu {
      display: none;
      position: absolute;
      top: 30px;
      right: 10px;
      background: #fff;
      padding: 10px;
      border: 1px solid #ccc;
    }
</style>
</head>

<body>
	
  <div id="popupMenu"></div>

<link rel="stylesheet" href="/css/jw.css">
<script src="/js/jw.js"></script>
<script> jwplayer.defaults = jwDefaults; </script>  
<div id="jwplayerDiv"></div>  
<script>
// Function to get URL parameters
function getParameterByName(name, url) {
  if (!url) url = window.location.href;
  name = name.replace(/[\[\]]/g, "\\$&");
  var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
    results = regex.exec(url);
  if (!results) return null;
  if (!results[2]) return '';
  return decodeURIComponent(results[2].replace(/\+/g, " "));
}

// Function to fetch JSON data
function fetchChannels(callback) {
  // Replace 'path/to/your/channels.json' Remember add the json in url format 
  fetch('api.json')
    .then(response => response.json())
    .then(data => callback(data))
    .catch(error => console.error('Error fetching JSON:', error));
}

// Define player setup function
function setupPlayer(channelData) {
  // Set up JWPlayer
  var playerSetup = {
    file: channelData.link, // Using link as file URL
    // Add your Extra jw Player codes here 
 "image": "/assets/img/play-cover.jpg",
 "autostart": false,
 "preload": "none",
  "repeat": false,
  "Volume": "100",
  "mute": false,
  "stretching": "exactfit",
  "width": "100%", 
  "cast": {},
  };

  if (channelData.link.endsWith('.mpd')) {
    // Set up DRM for DASH with KeyId & key if available
    playerSetup.type = 'dash';

    // Check if Clear Key is available
    if (channelData.keyId && channelData.key) {
      playerSetup.drm = {
        clearkey: {
          keyId: channelData.keyId,
          key: channelData.key
        }
      };
    }
  } else if (channelData.link.endsWith('.m3u8')) {
    // Set up DRM for HLS with keys if available
    playerSetup.type = 'hls';

    // Check if Clear Key is available
    if (channelData.keyId && channelData.key) {
      playerSetup.drm = {
        clearkey: {
          keyId: channelData.keyId,
          key: channelData.key
        }
      };
    }
  } else {
    // Default to HLS without keys
    playerSetup.type = 'hls';
  }

  jwplayer("jwplayerDiv").setup(playerSetup);
}

// Fetch channels data and set up the player
fetchChannels(function (channels) {
  // Get channel ID from the URL
  var channelId = getParameterByName('id');
  // Find the channel data in the JSON
  var channelData = channels.find(channel => channel.id === channelId);

  if (channelData) {
    // Set up the player with the channel data
    setupPlayer(channelData);
  } else {
    console.error('Channel not found for ID:', channelId);
  }

}).on('ready', function() {
    // Set poster image for video element to avoid black background for audio-only programs.
    var video = document.getElementById(this.id).getElementsByTagName('video')[0];
    if (video) video.setAttribute('poster', this.getConfig().image);
    });
</script>
    
</body>
</html>
